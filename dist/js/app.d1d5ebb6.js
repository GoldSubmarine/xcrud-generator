(function(e){function t(t){for(var a,l,r=t[0],i=t[1],u=t[2],s=0,f=[];s<r.length;s++)l=r[s],o[l]&&f.push(o[l][0]),o[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==o[i]&&(a=!1)}a&&(c.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},c=[];function l(e){return r.p+"js/"+({}[e]||e)+"."+{"chunk-2d0a3577":"4121aa70","chunk-2d0a43df":"4bd1bbc0","chunk-2d0aa90c":"6d4d1940","chunk-2d0aab07":"3402b144","chunk-2d0abc00":"b332e9b9","chunk-2d0ae937":"bc59fd8f","chunk-2d0aeb45":"70c346a3","chunk-2d0afa49":"cc2417e5","chunk-2d0b2762":"45995623","chunk-2d0b6187":"641857e7","chunk-2d0ba136":"b54832fd","chunk-2d0bb267":"98702658","chunk-2d0bcec1":"d228e574","chunk-2d0bff92":"591c8dd3","chunk-2d0c0494":"8a88c133","chunk-2d0c0a09":"faffa7fa","chunk-2d0c1ed0":"c6caf328","chunk-2d0c4313":"3e3a3dc8","chunk-2d0c46d1":"b396d8a5","chunk-2d0c512b":"3d8f82e9","chunk-2d0cf16e":"1ba11f19","chunk-2d0d056d":"b1b1186b","chunk-2d0d0645":"69c8b1d0","chunk-2d0d2f22":"c7b9d931","chunk-2d0d7e63":"32ea0774","chunk-2d0e1b57":"41f31255","chunk-2d0e1fbe":"f90ead40","chunk-2d0e22d6":"c291643b","chunk-2d0e542a":"eb40c44e","chunk-2d0e57ec":"9426d2d7","chunk-2d0e6553":"09198b44","chunk-2d0e6c86":"0a9eb852","chunk-2d0ea098":"4ef13f6f","chunk-2d208ac5":"4760b3be","chunk-2d209408":"a9ef5982","chunk-2d20f745":"60c9d23a","chunk-2d20ff23":"c9f58b43","chunk-2d2138c7":"20e9022a","chunk-2d216f3b":"887180fd","chunk-2d217e5b":"d3392139","chunk-2d21b84a":"b1a52ffe","chunk-2d21dcd2":"1eb3dc68","chunk-2d21f327":"846985ae","chunk-2d2214b3":"8d5a46fc","chunk-2d221814":"d09416c5","chunk-2d221a34":"def67ace","chunk-2d22502a":"bf2866a3","chunk-2d228ca6":"3762b158","chunk-2d2295e9":"f8eff0a2","chunk-2d22c171":"46e4f812","chunk-2d22c2b8":"36f05414","chunk-2d22ca58":"b0f14e12","chunk-2d2311f7":"18713e20","chunk-2d237ee7":"5bbd79cf","chunk-2d238465":"e424cff9","chunk-7532b3ea":"47a88cb2","chunk-774ac664":"97425fb4"}[e]+".js"}function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=o[e]=[t,a]});t.push(n[2]=a);var c,i=document.createElement("script");i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.src=l(e),c=function(t){i.onerror=i.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src,l=new Error("Loading chunk "+e+" failed.\n("+a+": "+c+")");l.type=a,l.request=c,n[1](l)}o[e]=void 0}};var u=setTimeout(function(){c({type:"timeout",target:i})},12e4);i.onerror=i.onload=c,document.head.appendChild(i)}return Promise.all(t)},r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var d=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("64a9"),o=n.n(a);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),o=n("5c96"),c=n.n(o),l=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"app"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableNames}},[n("el-table-column",{attrs:{type:"index"}}),n("el-table-column",{attrs:{prop:"name",label:"表名"}}),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),n("el-table-column",{attrs:{prop:"comment",label:"备注"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"success"},on:{click:function(n){return e.openDialog(t.$index,t.row)}}},[e._v("生成代码")])]}}])})],1),n("el-dialog",{attrs:{title:"生成代码",visible:e.dialogVisible,width:"80%","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[e.isMonacoShow?e._e():n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.fieldList}},[n("el-table-column",{attrs:{type:"index"}}),n("el-table-column",{attrs:{prop:"field",label:"字段名"}}),n("el-table-column",{attrs:{prop:"type",label:"字段类型"}}),n("el-table-column",{attrs:{prop:"comment",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.comment,callback:function(n){e.$set(t.row,"comment",n)},expression:"scope.row.comment"}})]}}],null,!1,3349697562)}),e._l(e.config.fields,function(t,a){return[n("el-table-column",{key:a,attrs:{prop:t.name,label:t.title},scopedSlots:e._u([{key:"default",fn:function(a){return["select"==t.type?n("el-select",{attrs:{placeholder:"请选择"},model:{value:a.row[t.name],callback:function(n){e.$set(a.row,t.name,n)},expression:"scope.row[field.name]"}},e._l(t.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e(),"input"==t.type?n("el-input",{model:{value:a.row[t.name],callback:function(n){e.$set(a.row,t.name,n)},expression:"scope.row[field.name]"}}):e._e()]}}],null,!0)})]})],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMonacoShow,expression:"isMonacoShow"}],ref:"monaco",staticClass:"monacoClass"}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{on:{click:function(t){e.isMonacoShow=!e.isMonacoShow}}},[e._v(e._s(e.isMonacoShow?"取消预览":"预览Model"))]),n("el-button",{attrs:{type:"primary"},on:{click:e.generate}},[e._v("确 定")])],1)],1)],1)}),r=[],i=(n("a481"),n("ac6a"),n("7f7f"),n("bc3a")),u=n.n(i),s=n("c2c6");u.a.defaults.baseURL="/";var d={name:"app",data:function(){return{config:{},tableNames:[],loading:!1,loadNum:0,tableName:"",dialogVisible:!1,isMonacoShow:!1,fieldList:[],editor:""}},mounted:function(){this.getTableName(),this.getConfig()},methods:{getConfig:function(){var e=this;this.loadNum++,u.a.get("/config").then(function(t){e.config=t.data}).catch(function(e){return console.log(e)}).finally(function(){return e.loadNum--})},getTableName:function(){var e=this;this.loadNum++,u.a.get("/table/list").then(function(t){e.tableNames=t.data}).catch(function(e){return console.log(e)}).finally(function(){return e.loadNum--})},openDialog:function(e,t){var n=this;this.dialogVisible=!0,this.loadNum++,this.tableName=t.name,u.a.get("/table/fields/info?name="+this.tableName).then(function(e){e.data.forEach(function(e){n.config.fields&&n.config.fields.forEach(function(t){return e[t.name]=t.default})}),n.fieldList=e.data}).catch(function(e){return console.log(e)}).finally(function(){return n.loadNum--})},generate:function(e,t){var n=this;this.loadNum++;var a=this.getModel();u.a.post("generate",a).then(function(e){n.$message({message:"生成成功",type:"success"}),n.dialogVisible=!1}).catch(function(e){return console.log(e)}).finally(function(){return n.loadNum--})},getModel:function(){var e=Object.assign({},this.config.mixin);return e.tableName=this.strTransfer(this.tableName),e.TableName=e.tableName.replace(/^\w/,function(e){return e.toUpperCase()}),e.fields=JSON.parse(JSON.stringify(this.fieldList)),e},handleClose:function(){this.isMonacoShow=!1,this.tableName="",this.fieldList=[]},strTransfer:function(e){return e?(/[a-z]+/g.test(e)||(e=e.toLowerCase()),e=e.replace(/\_(\w)/g,function(e,t){return t.toUpperCase()}),e=e.replace(/^(\w)/g,function(e,t){return t.toLowerCase()}),e):e}},watch:{loadNum:function(e,t){this.loading=0!==e},isMonacoShow:function(e,t){if(e){var n=this.getModel();this.editor=s["editor"].create(this.$refs["monaco"],{value:"",language:"json",theme:"vs-dark",automaticLayout:!0,autoIndent:!0,autoClosingBrackets:!0,acceptSuggestionOnEnter:"on",colorDecorators:!0,dragAndDrop:!0,formatOnPaste:!0,formatOnType:!0,mouseWheelZoom:!0,readOnly:!0,scrollbar:{verticalScrollbarSize:5}}),this.editor.setValue(JSON.stringify(n,null,"\t"))}else this.editor.dispose()}}},f=d,h=(n("034f"),n("2877")),b=Object(h["a"])(f,l,r,!1,null,null,null),p=b.exports;a["default"].config.productionTip=!1,a["default"].use(c.a),new a["default"]({el:"#app",render:function(e){return e(p)}})},"64a9":function(e,t,n){}});